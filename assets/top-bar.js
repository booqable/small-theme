(()=>{var g=e=>requestAnimationFrame(e),p=(e,t)=>{g(()=>{let n=e();g(()=>t(n))})};var f=()=>{let e=new Map;return{register:(i,o)=>{if(typeof o=="function")if(e.set(i,o),window.themeCleanup){let c=window.themeCleanup;window.themeCleanup=()=>{o(),c()}}else window[`cleanup${i}`]=o},cleanup:i=>{let o=e.get(i);o&&(o(),e.delete(i))},cleanupAll:()=>{e.forEach((i,o)=>{try{i()}catch{}}),e.clear()},get registered(){return Array.from(e.keys())}}};var m=(e,t,n=document.documentElement)=>{n.style.setProperty(e,t)},w=e=>{if(!e)return{width:0,height:0};let t=e.getBoundingClientRect();return{width:t.width,height:t.height}};var l={selectors:{bar:".top-bar",doc:document.documentElement,header:".header__inner"},classes:{filled:"header__inner--filled",sticky:"header__inner--sticky"},modifier:{scroll:"scrolled"},cssVars:{barHeight:"--top-bar-height"},minHeight:200,hysteresis:20},b=()=>{let e=new Map,t=new Map([["barHeight",0],["lastScroll",0]]);return{init:()=>(e.set("doc",l.selectors.doc),e.set("header",e.get("doc").querySelector(l.selectors.header)),e.set("bar",e.get("doc").querySelector(l.selectors.bar)),e.get("bar")!==null),get:r=>e.get(r),getCache:r=>t.get(r),setCache:(r,a)=>{t.set(r,a)},cleanup:()=>{e.clear(),t.clear()}}},v=e=>{let t=()=>{let n=e.get("bar");if(!n)return;p(()=>{let o=w(n),c=e.get("header"),r=c?.classList.contains(l.classes.filled),a=c?.classList.contains(l.classes.sticky);return{height:Math.floor(o.height),isFilled:r,isSticky:a}},o=>{let{height:c,isFilled:r,isSticky:a}=o;if(!a&&r)return;let u=e.get("doc");e.setCache("barHeight",c),m(l.cssVars.barHeight,`${c}px`,u)})};return{calculate:t,recalculate:t}},y=e=>{let t=e.get("doc"),n=e.get("header");return{handleScroll:()=>{p(()=>{let c=window.scrollY,r=e.getCache("barHeight"),a=e.getCache("lastScroll"),u=t.classList.contains(l.modifier.scroll),d=n?.classList.contains(l.classes.sticky),h=Math.max(l.minHeight,r);return{current:c,threshold:h,isScrolled:u,isSticky:d,lastScroll:a}},c=>{if(!c)return;let{current:r,isScrolled:a,threshold:u,lastScroll:d,isSticky:h}=c;if(h){if(r<=u){t.classList.remove(l.modifier.scroll),e.setCache("lastScroll",r);return}if(r<d-l.hysteresis&&a&&r>u){t.classList.remove(l.modifier.scroll),e.setCache("lastScroll",r);return}r>d&&!a&&r>u&&t.classList.add(l.modifier.scroll),e.setCache("lastScroll",r)}})}}},C=(e,t)=>{let n=null,s=null;return{init:()=>{e.calculate(),n=()=>t.handleScroll(),s=()=>e.recalculate(),window.addEventListener("scroll",n,{passive:!0}),window.addEventListener("resize",s,{passive:!0})},destroy:()=>{n&&(window.removeEventListener("scroll",n,{passive:!0}),n=null),s&&(window.removeEventListener("resize",s,{passive:!0}),s=null)}}},S=()=>{let e=b(),t=null,n=null,s=null,i=()=>e.init()?(t=v(e),n=y(e),s=C(t,n),s.init(),o):null,o=()=>{s?.destroy(),e?.cleanup(),t=null,n=null,s=null};return{init:i,destroy:o}},x=()=>{let e=f(),n=S().init();n&&e.register("TopBarAPI",n)};x();})();
