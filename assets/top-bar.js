import{frameSequence as l,cleanupSystem as e,setCssVar as r,getDimensions as t}from"utils.js";const s={l:{t:".top-bar",i:document.documentElement,o:".header__inner"},u:{h:"header__inner--filled",sticky:"header__inner--sticky"},S:{scroll:"scrolled"},p:{k:"--top-bar-height"},minHeight:200,v:20},i=()=>{const l=new Map,e=new Map([["barHeight",0],["lastScroll",0]]);return{init:()=>(l.set("doc",s.l.i),l.set("header",l.get("doc").querySelector(s.l.o)),l.set("bar",l.get("doc").querySelector(s.l.t)),null!==l.get("bar")),get:e=>l.get(e),_:l=>e.get(l),m:(l,r)=>{e.set(l,r)},H:()=>{l.clear(),e.clear()}}},n=e=>{const i=()=>{const i=e.get("bar");i&&l(()=>{const l=t(i),r=e.get("header"),n=r?.classList.contains(s.u.h),c=r?.classList.contains(s.u.sticky);return{height:Math.floor(l.height),M:n,C:c}},l=>{const{height:t,M:i,C:n}=l;if(!n&&i)return;const c=e.get("doc");e.m("barHeight",t),r(s.p.k,`${t}px`,c)})};return{F:i,j:i}},c=e=>{const r=e.get("doc"),t=e.get("header");return{A:()=>{l(()=>{const l=window.scrollY,i=e._("barHeight"),n=e._("lastScroll"),c=r.classList.contains(s.S.scroll),o=t?.classList.contains(s.u.sticky);return{B:l,threshold:Math.max(s.minHeight,i),I:c,C:o,P:n}},l=>{if(!l)return;const{B:t,I:i,threshold:n,P:c,C:o}=l;if(o){if(t<=n)return r.classList.remove(s.S.scroll),void e.m("lastScroll",t);if(t<c-s.v&&i&&t>n)return r.classList.remove(s.S.scroll),void e.m("lastScroll",t);t>c&&!i&&t>n&&r.classList.add(s.S.scroll),e.m("lastScroll",t)}})}}},o=(l,e)=>{let r=null,t=null;return{init:()=>{l.F(),r=()=>e.A(),t=()=>l.j(),window.addEventListener("scroll",r,{passive:!0}),window.addEventListener("resize",t,{passive:!0})},destroy:()=>{r&&(window.removeEventListener("scroll",r,{passive:!0}),r=null),t&&(window.removeEventListener("resize",t,{passive:!0}),t=null)}}},a=()=>{const l=i();let e=null,r=null,t=null;const s=()=>{t?.destroy(),l?.H(),e=null,r=null,t=null};return{init:()=>l.init()?(e=n(l),r=c(l),t=o(e,r),t.init(),s):null,destroy:s}},d=()=>{const l=e(),r=a().init();r&&l.register("TopBarAPI",r)};d();