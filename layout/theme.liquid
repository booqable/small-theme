<!DOCTYPE html>
<html>
  <head>
    {% comment %} Base metadata {% endcomment %}
    {%- render 'page-base-meta',
        brand_color: branding_color,
        canonical_url: canonical_url,
        page_description: page_description,
        page_title: page_title,
        settings: settings,
        is_local_env: local_env?,
        shop: shop
    -%}

    {% comment %} Resource hints for performance {% endcomment %}
    {%- render 'page-resource-hints' -%}

    {% comment %} Preload fonts {% endcomment %}
    {%- render 'fonts', settings: settings -%}

    {% comment %} Load root variables {% endcomment %}
    {%- render 'css-root-variables', settings: settings -%}

    {% comment %} Async CSS loading with resource hints {% endcomment %}
    {%- assign css_files = "critical.css, styles.css, header.css" | split: ", " -%}

    {%- for css_file in css_files -%}
      {%- assign css_url = css_file | asset_url -%}
      <link rel="preload" href="{{ css_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'" >
      <link rel="stylesheet" href="{{ css_url }}"{% if css_file == 'critical.css' %} data-optimize="critical"{% endif %} media="all" onload="this.media='all'">
    {%- endfor -%}

    {{ sections_assets }}
    {{ content_for_header }}

    {%- render 'page-social-share-meta',
        canonical_url: canonical_url,
        locale: locale,
        image_url: page_meta_image_url,
        image_alt: page_meta_image_alt,
        page_description: page_description,
        page_title: page_title,
        product: product,
        shop: shop
    -%}

    {% comment %} Enhanced performance monitoring {% endcomment %}
    {%- render 'page-performance-monitoring' -%}
  </head>
  <body>
    <header class="header">
      {% section 'header' %}
    </header>

    <main>
      <h1>Welcome to My Theme</h1>
      <h2>Welcome to My Theme 2</h2>
      <p>This is the main content area of the theme.</p>

      {{ content_for_layout }}
    </main>

    <footer>
      <p>&copy; 2025 Small theme</p>
    </footer>

    {{ content_for_body }}

    {% comment %} Critical JavaScript files {% endcomment %}
    <script type="importmap">
      {
        "imports": {
          "utils.js": "{{ 'utils.js' | asset_url }}"
        }
      }
    </script>
    <script type="module" src='{{ 'main.js' | asset_url }}'></script>
  </body>
</html>
